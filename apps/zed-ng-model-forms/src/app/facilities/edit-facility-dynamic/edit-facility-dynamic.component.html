
<div class="flex flex-col items-center">
    <div class="rounded overflow-hidden shadow-lg w-full bg-slate-100 p-4">
        <h2 class="text-lg">
            Edit Facility - Dynamic Form
        </h2>
        <form [formGroup]="form">

            <div class="form-grid facility">
                <dynamic-form-field [model]="model" field="label" >

                </dynamic-form-field>

                <dynamic-form-field [model]="model" field="stations">

                </dynamic-form-field>

                <dynamic-form-field [model]="model" field="status">
                
                </dynamic-form-field>
            </div>

            <div class="form-grid facility">
                <mat-form-field class="label">
                    <mat-label>Label</mat-label>
                    <input matInput [formControl]="form.controls['label']">
                </mat-form-field>
                <mat-form-field class="stations">
                    <mat-label>Stations</mat-label>
                    <input matInput type="number" formControlName="stations" style="text-align: right" min="0">
                </mat-form-field>
                <mat-form-field class="status">
                    <mat-label>Status</mat-label>
                    <mat-select formControlName="status">
                        <mat-option *ngFor="let option of statusOptions" [value]="option.value">{{option.label}}</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>

            <div class="rounded w-full bg-slate-300 p-2 my-2">
                <span class="rounded bg-slate-200 mr-2 py-1 px-2">
                    <span class="mr-1">Dirty:</span>
                    <span [ngClass]="{ 'text-red-500': ! form.dirty, 'text-green-500': form.dirty }">
                        {{ form.dirty }}
                    </span>
                </span>
                
                <span class="rounded bg-slate-200 mr-2 py-1 px-2">
                    <span class="mr-1">Valid:</span>
                    <span [ngClass]="{ 'text-red-500': ! form.valid, 'text-green-500': form.valid }">
                        {{ form.valid }}
                    </span>
                </span>
            </div>
        </form>
        <div class="action-area">
            <button (click)="submit()" 
            class="btn btn-blue"
            [ngClass]="{'btn-disabled': ! form.valid || ! form.dirty}"
            [disabled]="! form.valid || ! form.dirty">
                Submit
            </button>
        </div>
    </div>

    <div
        class="rounded overflow-hidden shadow-lg w-full bg-slate-100 p-4 mt-6">
        <pre>{{ this.form.value | json }}</pre>
    </div>
</div>

