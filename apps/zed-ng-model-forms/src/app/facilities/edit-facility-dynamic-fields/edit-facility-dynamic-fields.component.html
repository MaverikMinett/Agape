
<div class="flex flex-col items-center">
    <div class="rounded overflow-hidden shadow-lg w-full bg-slate-100 p-4">
        <h2 class="text-lg mb-3">
            Edit Facility - Reactive Form with Dynamic Fields
        </h2>
        <form [formGroup]="form">

            <div class="form-grid facility">
                <dynamic-form-field [model]="model" field="label" 
                    (ngModelChange)="valueChanged($event, 'label', '(ngModelChange)', 'via dynamic form')"
                    (change)="valueChanged($event, 'label', '(change)', 'via dynamic form')"
                >
                </dynamic-form-field>

                <dynamic-form-field [model]="model" field="stations"
                    (ngModelChange)="valueChanged($event, 'stations', '(ngModelChange)', 'via dynamic form')"
                    (change)="valueChanged($event, 'stations', '(change)', 'via dynamic form')"
                >
                </dynamic-form-field>

                <dynamic-form-field [model]="model" field="status"
                    (ngModelChange)="valueChanged($event, 'status', '(ngModelChange)', 'via dynamic form')"
                    (change)="valueChanged($event, 'status', '(change)', 'via dynamic form')"
                >
                </dynamic-form-field>
            </div>


            <div class="rounded w-full bg-slate-300 p-2 my-2">
                <span class="rounded bg-slate-200 mr-2 py-1 px-2">
                    <span class="mr-1">Dirty:</span>
                    <span [ngClass]="{ 'text-red-500': ! form.dirty, 'text-green-500': form.dirty }">
                        {{ form.dirty }}
                    </span>
                </span>
                
                <span class="rounded bg-slate-200 mr-2 py-1 px-2">
                    <span class="mr-1">Valid:</span>
                    <span [ngClass]="{ 'text-red-500': ! form.valid, 'text-green-500': form.valid }">
                        {{ form.valid }}
                    </span>
                </span>
            </div>
        </form>
        <div class="action-area">
            <button (click)="submit()" 
            class="btn btn-blue"
            [ngClass]="{'btn-disabled': ! form.valid || ! form.dirty}"
            [disabled]="! form.valid || ! form.dirty">
                Submit
            </button>
        </div>
    </div>

    <div class="rounded overflow-hidden shadow-lg w-full bg-slate-100 p-4 mt-6">
        <h3 class="text-lg mb-3">
            Form Value
        </h3>
        <pre>{{ this.form.value | json }}</pre>
    </div>

    <div class="rounded overflow-hidden shadow-lg w-full bg-slate-100 p-4 mt-6">
        <h3 class="text-lg mb-3">
            Changes
        </h3>
        <div *ngFor="let change of changes">
            {{ change }}
        </div>
    </div>
</div>

